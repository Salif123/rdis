<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pregnancy Medications</title>
    <link rel="stylesheet" href="\static\preg.css">
</head>
<body>
    <a href="javascript:history.back()" class="back-btn">Back</a>
    <h1 class="page-title">Pregnancy Medications Inventory</h1>
    <div class="med-container">
        
        {% for med in medicines %}
        <div class="med-card">
            <div class="med-name">{{ med['name'] }}</div>
            <div class="med-description">{{ med['description'] }}</div>
            <div class="stock-control">
                <label>Stock:</label>
                <input type="number" class="stock-input" value="{{ med['stock'] }}" 
                       id="stock-{{ med['id'] }}" min="0">
                <button class="update-btn" onclick="updateStock({{ med['id'] }})">
                    Update
                </button>
            </div>
        </div>
        {% endfor %}
    </div>

    <script>
        function updateStock(medId) {
            const newStock = document.getElementById(`stock-${medId}`).value;
            
            fetch('/update_med_stock', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `med_id=${medId}&stock=${newStock}`
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Stock updated successfully!');
                } else {
                    alert('Failed to update stock.');
                }
            });
        }
    </script>
</body>
</html>